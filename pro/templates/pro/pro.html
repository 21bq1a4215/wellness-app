{% extends "base.html" %}
{% load static %}
{% block content %}
    <div class="container" style="margin-top:6rem;">
      <div class="header clearfix">
        <h1 class="text-center display-4">Try Wellness Pro unlock the full Wellness experience</h1>
      </div>

      <div class="jumbotron">
        <h2>Pro Membership</h2>
        <p class="lead">Purchase Pro Membership for only $99.</p>
        <a href="#" id="buy_now_btn" class="btn btn-primary">Buy Now</a>
      </div>
    </div>

    <script src="https://js.stripe.com/v3/"></script>

    <script type="text/javascript">
        var stripe = Stripe('{{ stripe_public_key }}');

        const buy_now_button = document.querySelector('#buy_now_btn')

        buy_now_button.addEventListener('click', event => {   
            stripe.redirectToCheckout({
            // Make the id field from the Checkout Session creation API response
            // available to this file, so you can provide it as parameter here
            // instead of the {{CHECKOUT_SESSION_ID}} placeholder.
              sessionId: '{{ session_id }}'
            }).then(function (result) {
              // If `redirectToCheckout` fails due to a browser or network
              // error, display the localized error message to your customer
              // using `result.error.message`.
            });
          }) 
      </script>
      {% endblock %}